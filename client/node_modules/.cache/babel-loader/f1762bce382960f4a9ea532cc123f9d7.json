{"ast":null,"code":"import _slicedToArray from \"/Users/roger/Projects/mechanic-frontend/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/roger/Projects/mechanic-frontend/client/src/components/PostImageUpload.js\";\nimport React, { useEffect, useState } from 'react';\nimport { imagesRef } from '../helpers/firebase';\nimport axiosWithAuth from '../helpers/axiosWithAuth';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport CarImgShow from './CarImgShow';\nimport CarImageFixShow from './CarImageFixShow';\nimport DriveEtaIcon from '@material-ui/icons/DriveEta';\nimport ImageCarousel from './ImageCarousel';\nimport DescriptionIcon from '@material-ui/icons/Description';\nconst useStyles = makeStyles(theme => ({\n  button: {\n    margin: theme.spacing(1)\n  }\n}));\n\nfunction PostImageUpload(props) {\n  const classes = useStyles();\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        postImages = _useState2[0],\n        setPostImages = _useState2[1];\n\n  const _useState3 = useState({}),\n        _useState4 = _slicedToArray(_useState3, 2),\n        file = _useState4[0],\n        setFile = _useState4[1];\n\n  const _useState5 = useState(true),\n        _useState6 = _slicedToArray(_useState5, 2),\n        isPostImageCarousel = _useState6[0],\n        setIsPostImageCarousel = _useState6[1];\n\n  const _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 2),\n        fullopen = _useState8[0],\n        setFullOpen = _useState8[1];\n\n  const _useState9 = useState(false),\n        _useState10 = _slicedToArray(_useState9, 2),\n        errorOpen = _useState10[0],\n        setErrorOpen = _useState10[1];\n\n  const handlefullOpen = () => {\n    setIsPostImageCarousel(false);\n    setFullOpen(true);\n  };\n\n  const handlefullClose = () => {\n    setFullOpen(false);\n  };\n\n  function handleErrorClose() {\n    setErrorOpen(false);\n  }\n\n  function handleErrorOpen() {\n    setErrorOpen(true);\n  }\n\n  useEffect(() => {\n    fetchPostImages(props.post.id);\n  }, [file]);\n\n  async function fetchPostImages(id) {\n    let fixImages = await axiosWithAuth().get(\"/post/\".concat(id, \"/post_images\"));\n    setPostImages(fixImages.data); // return fixImages;\n  }\n\n  function handleInputChanges(e) {\n    e.preventDefault();\n    const file = e.target.files[0];\n\n    if (!file) {\n      return;\n    }\n\n    if (file && file.size > 1e8) {\n      alert(\"File is too large. Maximum limit is 100MB.\");\n      e.target.value = '';\n    } else {\n      setFile(file);\n    }\n  } // console.log(props.post.id,\"psotsssss\")\n\n\n  function handleSubmitUploaderFixDocuments(e) {\n    e.preventDefault(); // Create file ref (Example: /documents/:car_id/:file_name)\n\n    const fileRef = imagesRef.child(\"\".concat(props.post.id, \"/\").concat(file.name)); // Upload file\n\n    fileRef.put(file).then(snapshot => {\n      // console.log('Upload success!', snapshot.constructor, snapshot);\n      axiosWithAuth().post(\"/post/\".concat(props.post.id, \"/post_images\"), {\n        file_name: file.name\n      }).then(res => {\n        fetchPostImages(props.post.id); // window.location.reload();\n      }).catch(error => {\n        console.error(error);\n      });\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  if (props.isCarousel) {\n    return React.createElement(React.Fragment, null, React.createElement(ImageCarousel, {\n      style: {\n        backgroundColor: \"red\",\n        maxWidth: \"100px\"\n      },\n      isImageDelShow: true,\n      postImages: postImages,\n      post: props.post,\n      fetchPostImage: fetchPostImages,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }));\n  } else if (props.isForm) {\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      style: {\n        height: \"200px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Add Image\"), React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: \"column\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: handleSubmitUploaderFixDocuments,\n      style: {\n        display: 'flex',\n        flexDirection: \"column\",\n        maxWidth: \"200px\",\n        justifyContent: \"Center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      required: true,\n      id: \"uploader\",\n      type: \"file\",\n      accept: \"image/*,.pdf,.doc\",\n      onChange: handleInputChanges,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), React.createElement(Button, {\n      variant: \"contained\",\n      name: \"car_type\",\n      color: \"default\",\n      className: classes.button,\n      startIcon: React.createElement(CloudUploadIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }),\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Upload\")))));\n  } else if (props.isCarouselForPost) {\n    return React.createElement(React.Fragment, null, React.createElement(ImageCarousel, {\n      isPostImageCarousel: isPostImageCarousel,\n      postImages: postImages,\n      post: props.post,\n      fetchPostImage: fetchPostImages,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }));\n  } else if (postImages) {} else {\n    return React.createElement(React.Fragment, null, React.createElement(Button, {\n      style: {\n        color: \"darkcyan\",\n        outline: '0'\n      },\n      onClick: handlefullOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"Expand Images\"), React.createElement(ImageCarousel, {\n      open: fullopen,\n      handleClose: handlefullClose,\n      onClose: handlefullClose,\n      postImages: postImages,\n      post: props.post,\n      fetchPostImage: fetchPostImages,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }));\n  }\n}\n\nexport default PostImageUpload;","map":{"version":3,"sources":["/Users/roger/Projects/mechanic-frontend/client/src/components/PostImageUpload.js"],"names":["React","useEffect","useState","imagesRef","axiosWithAuth","Button","makeStyles","CloudUploadIcon","CarImgShow","CarImageFixShow","DriveEtaIcon","ImageCarousel","DescriptionIcon","useStyles","theme","button","margin","spacing","PostImageUpload","props","classes","postImages","setPostImages","file","setFile","isPostImageCarousel","setIsPostImageCarousel","fullopen","setFullOpen","errorOpen","setErrorOpen","handlefullOpen","handlefullClose","handleErrorClose","handleErrorOpen","fetchPostImages","post","id","fixImages","get","data","handleInputChanges","e","preventDefault","target","files","size","alert","value","handleSubmitUploaderFixDocuments","fileRef","child","name","put","then","snapshot","file_name","res","catch","error","console","err","isCarousel","backgroundColor","maxWidth","isForm","height","display","flexDirection","justifyContent","isCarouselForPost","color","outline"],"mappings":";;AACA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,SAAT,QAA0B,qBAA1B;AACA,OAAOC,aAAP,MAA0B,0BAA1B;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,eAAP,MAA4B,gCAA5B;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,OAAOC,YAAP,MAAyB,6BAAzB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,eAAP,MAA4B,gCAA5B;AAGA,MAAMC,SAAS,GAAGP,UAAU,CAACQ,KAAK,KAAK;AACnCC,EAAAA,MAAM,EAAE;AACJC,IAAAA,MAAM,EAAEF,KAAK,CAACG,OAAN,CAAc,CAAd;AADJ;AAD2B,CAAL,CAAN,CAA5B;;AAMA,SAASC,eAAT,CAAyBC,KAAzB,EAAgC;AAG5B,QAAMC,OAAO,GAAGP,SAAS,EAAzB;;AAH4B,oBAIQX,QAAQ,CAAC,EAAD,CAJhB;AAAA;AAAA,QAIrBmB,UAJqB;AAAA,QAITC,aAJS;;AAAA,qBAKJpB,QAAQ,CAAC,EAAD,CALJ;AAAA;AAAA,QAKrBqB,IALqB;AAAA,QAKfC,OALe;;AAAA,qBAMuBtB,QAAQ,CAAC,IAAD,CAN/B;AAAA;AAAA,QAMrBuB,mBANqB;AAAA,QAMDC,sBANC;;AAAA,qBAQIxB,QAAQ,CAAC,KAAD,CARZ;AAAA;AAAA,QAQrByB,QARqB;AAAA,QAQXC,WARW;;AAAA,qBASM1B,QAAQ,CAAC,KAAD,CATd;AAAA;AAAA,QASrB2B,SATqB;AAAA,QASVC,YATU;;AAY5B,QAAMC,cAAc,GAAG,MAAM;AACzBL,IAAAA,sBAAsB,CAAC,KAAD,CAAtB;AACAE,IAAAA,WAAW,CAAC,IAAD,CAAX;AACH,GAHD;;AAIA,QAAMI,eAAe,GAAG,MAAM;AAC1BJ,IAAAA,WAAW,CAAC,KAAD,CAAX;AACH,GAFD;;AAIA,WAASK,gBAAT,GAA4B;AACxBH,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACH;;AAED,WAASI,eAAT,GAA2B;AACvBJ,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACH;;AAGD7B,EAAAA,SAAS,CAAC,MAAM;AAEZkC,IAAAA,eAAe,CAAChB,KAAK,CAACiB,IAAN,CAAWC,EAAZ,CAAf;AAEH,GAJQ,EAIN,CAACd,IAAD,CAJM,CAAT;;AAMA,iBAAeY,eAAf,CAA+BE,EAA/B,EAAmC;AAC/B,QAAIC,SAAS,GAAG,MAAMlC,aAAa,GAAGmC,GAAhB,iBAA6BF,EAA7B,kBAAtB;AACAf,IAAAA,aAAa,CAACgB,SAAS,CAACE,IAAX,CAAb,CAF+B,CAG/B;AACH;;AAED,WAASC,kBAAT,CAA4BC,CAA5B,EAA+B;AAC3BA,IAAAA,CAAC,CAACC,cAAF;AACA,UAAMpB,IAAI,GAAGmB,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CAAb;;AACA,QAAI,CAACtB,IAAL,EAAW;AACP;AACH;;AACD,QAAIA,IAAI,IAAIA,IAAI,CAACuB,IAAL,GAAY,GAAxB,EAA6B;AACzBC,MAAAA,KAAK,CAAC,4CAAD,CAAL;AACAL,MAAAA,CAAC,CAACE,MAAF,CAASI,KAAT,GAAiB,EAAjB;AACH,KAHD,MAGO;AACHxB,MAAAA,OAAO,CAACD,IAAD,CAAP;AACH;AACJ,GArD2B,CAuDhC;;;AAEI,WAAS0B,gCAAT,CAA0CP,CAA1C,EAA6C;AACzCA,IAAAA,CAAC,CAACC,cAAF,GADyC,CAEzC;;AACA,UAAMO,OAAO,GAAG/C,SAAS,CAACgD,KAAV,WAAmBhC,KAAK,CAACiB,IAAN,CAAWC,EAA9B,cAAoCd,IAAI,CAAC6B,IAAzC,EAAhB,CAHyC,CAIzC;;AACAF,IAAAA,OAAO,CAACG,GAAR,CAAY9B,IAAZ,EAAkB+B,IAAlB,CAAwBC,QAAD,IAAc;AACjC;AACAnD,MAAAA,aAAa,GAAGgC,IAAhB,iBAA8BjB,KAAK,CAACiB,IAAN,CAAWC,EAAzC,mBAA2D;AAAEmB,QAAAA,SAAS,EAAEjC,IAAI,CAAC6B;AAAlB,OAA3D,EACKE,IADL,CACUG,GAAG,IAAI;AACTtB,QAAAA,eAAe,CAAChB,KAAK,CAACiB,IAAN,CAAWC,EAAZ,CAAf,CADS,CAET;AACH,OAJL,EAKKqB,KALL,CAKWC,KAAK,IAAI;AACZC,QAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACH,OAPL;AAQH,KAVD,EAUGD,KAVH,CAUSG,GAAG,IAAI;AACZD,MAAAA,OAAO,CAACD,KAAR,CAAcE,GAAd;AACH,KAZD;AAaH;;AAIH,MAAG1C,KAAK,CAAC2C,UAAT,EAAoB;AACd,WACR,0CAEQ,oBAAC,aAAD;AACA,MAAA,KAAK,EAAE;AAAEC,QAAAA,eAAe,EAAE,KAAnB;AAA0BC,QAAAA,QAAQ,EAAC;AAAnC,OADP;AAEI,MAAA,cAAc,EAAG,IAFrB;AAGI,MAAA,UAAU,EAAE3C,UAHhB;AAII,MAAA,IAAI,EAAEF,KAAK,CAACiB,IAJhB;AAKI,MAAA,cAAc,EAAED,eALpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFR,CADQ;AAcH,GAfH,MAkBO,IAAGhB,KAAK,CAAC8C,MAAT,EAAgB;AACjB,WACI,0CACA;AAAK,MAAA,KAAK,EAAE;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,EAEI;AAAK,MAAA,KAAK,EAAE;AAAEC,QAAAA,OAAO,EAAE,MAAX;AAAmBC,QAAAA,aAAa,EAAE;AAAlC,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAM,MAAA,QAAQ,EAAEnB,gCAAhB;AAAkD,MAAA,KAAK,EAAE;AAAEkB,QAAAA,OAAO,EAAE,MAAX;AAAmBC,QAAAA,aAAa,EAAE,QAAlC;AAA2CJ,QAAAA,QAAQ,EAAC,OAApD;AAA4DK,QAAAA,cAAc,EAAC;AAA3E,OAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACQ;AAAO,MAAA,QAAQ,MAAf;AAAgB,MAAA,EAAE,EAAC,UAAnB;AAA8B,MAAA,IAAI,EAAC,MAAnC;AAA0C,MAAA,MAAM,EAAC,mBAAjD;AAAqE,MAAA,QAAQ,EAAE5B,kBAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADR,EAEQ,oBAAC,MAAD;AACI,MAAA,OAAO,EAAC,WADZ;AAEI,MAAA,IAAI,EAAC,UAFT;AAGI,MAAA,KAAK,EAAC,SAHV;AAII,MAAA,SAAS,EAAErB,OAAO,CAACL,MAJvB;AAKI,MAAA,SAAS,EAAE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALf;AAMI,MAAA,IAAI,EAAC,QANT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFR,CADJ,CAFJ,CADA,CADJ;AAwBH,GAzBI,MAyBC,IAAII,KAAK,CAACmD,iBAAV,EAA4B;AAE9B,WACI,0CAEQ,oBAAC,aAAD;AACA,MAAA,mBAAmB,EAAE7C,mBADrB;AAEA,MAAA,UAAU,EAAEJ,UAFZ;AAGA,MAAA,IAAI,EAAEF,KAAK,CAACiB,IAHZ;AAIA,MAAA,cAAc,EAAED,eAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFR,CADJ;AAaH,GAfK,MAeA,IAAId,UAAJ,EAAe,CAGpB,CAHK,MAIN;AACI,WACI,0CACQ,oBAAC,MAAD;AACI,MAAA,KAAK,EAAE;AAAEkD,QAAAA,KAAK,EAAE,UAAT;AAAqBC,QAAAA,OAAO,EAAE;AAA9B,OADX;AAEI,MAAA,OAAO,EAAEzC,cAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADR,EAQQ,oBAAC,aAAD;AACD,MAAA,IAAI,EAAEJ,QADL;AAED,MAAA,WAAW,EAAEK,eAFZ;AAGD,MAAA,OAAO,EAAEA,eAHR;AAIA,MAAA,UAAU,EAAEX,UAJZ;AAKA,MAAA,IAAI,EAAEF,KAAK,CAACiB,IALZ;AAMA,MAAA,cAAc,EAAED,eANhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARR,CADJ;AAsBH;AAIJ;;AAID,eAAejB,eAAf","sourcesContent":["\nimport React, { useEffect, useState } from 'react';\nimport { imagesRef } from '../helpers/firebase';\nimport axiosWithAuth from '../helpers/axiosWithAuth';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport CarImgShow from './CarImgShow';\nimport CarImageFixShow from './CarImageFixShow';\nimport DriveEtaIcon from '@material-ui/icons/DriveEta';\nimport ImageCarousel from './ImageCarousel';\nimport DescriptionIcon from '@material-ui/icons/Description';\n\n\nconst useStyles = makeStyles(theme => ({\n    button: {\n        margin: theme.spacing(1),\n    },\n}));\n\nfunction PostImageUpload(props) {\n\n\n    const classes = useStyles();\n    const [postImages, setPostImages] = useState([]);\n    const [file, setFile] = useState({});\n    const [isPostImageCarousel,setIsPostImageCarousel]=useState(true)\n\n    const [fullopen, setFullOpen] = useState(false);\n    const [errorOpen, setErrorOpen] = useState(false);\n\n\n    const handlefullOpen = () => {\n        setIsPostImageCarousel(false)\n        setFullOpen(true);\n    };\n    const handlefullClose = () => {\n        setFullOpen(false);\n    };\n\n    function handleErrorClose() {\n        setErrorOpen(false);\n    }\n\n    function handleErrorOpen() {\n        setErrorOpen(true);\n    }\n\n\n    useEffect(() => {\n\n        fetchPostImages(props.post.id );\n\n    }, [file]);\n\n    async function fetchPostImages(id) {\n        let fixImages = await axiosWithAuth().get(`/post/${id}/post_images`)\n        setPostImages(fixImages.data);\n        // return fixImages;\n    }\n\n    function handleInputChanges(e) {\n        e.preventDefault();\n        const file = e.target.files[0]\n        if (!file) {\n            return;\n        }\n        if (file && file.size > 1e8) {\n            alert(\"File is too large. Maximum limit is 100MB.\")\n            e.target.value = ''\n        } else {\n            setFile(file);\n        }\n    }\n\n// console.log(props.post.id,\"psotsssss\")\n\n    function handleSubmitUploaderFixDocuments(e) {\n        e.preventDefault()\n        // Create file ref (Example: /documents/:car_id/:file_name)\n        const fileRef = imagesRef.child(`${props.post.id}/${file.name}`)\n        // Upload file\n        fileRef.put(file).then((snapshot) => {\n            // console.log('Upload success!', snapshot.constructor, snapshot);\n            axiosWithAuth().post(`/post/${props.post.id}/post_images`, { file_name: file.name })\n                .then(res => {\n                    fetchPostImages(props.post.id);\n                    // window.location.reload();\n                })\n                .catch(error => {\n                    console.error(error);\n                })\n        }).catch(err => {\n            console.error(err)\n        });\n    }\n\n\n\n  if(props.isCarousel){\n        return (\n<>\n\n        <ImageCarousel\n        style={{ backgroundColor: \"red\", maxWidth:\"100px\"}}\n            isImageDelShow= {true}\n            postImages={postImages}\n            post={props.post}\n            fetchPostImage={fetchPostImages}\n\n        />\n    \n</>\n        )\n    }\n    \n\n    else if(props.isForm){\n        return (\n            <>\n            <div style={{ height: \"200px\" }}>\n                <h4>Add Image</h4>\n                <div style={{ display: 'flex', flexDirection: \"column\" }}>\n                    <form onSubmit={handleSubmitUploaderFixDocuments} style={{ display: 'flex', flexDirection: \"column\",maxWidth:\"200px\",justifyContent:\"Center\"}}>\n                            <input required id=\"uploader\" type=\"file\" accept=\"image/*,.pdf,.doc\" onChange={handleInputChanges}></input>\n                            <Button\n                                variant=\"contained\"\n                                name=\"car_type\"\n                                color=\"default\"\n                                className={classes.button}\n                                startIcon={<CloudUploadIcon />}\n                                type=\"submit\"\n                            >\n                                Upload\n                </Button>\n                        </form>\n                    </div>\n                </div>\n           \n\n            </>\n        )\n    }else if (props.isCarouselForPost){\n\n        return (\n            <>\n           \n                    <ImageCarousel\n                    isPostImageCarousel={isPostImageCarousel}\n                    postImages={postImages}\n                    post={props.post}\n                    fetchPostImage={fetchPostImages}\n            \n                    />\n           \n            </>\n                    )\n    }else if (postImages){\n\n\n    }else\n    {\n        return (\n            <>\n                    <Button\n                        style={{ color: \"darkcyan\", outline: '0' }}\n                        onClick={handlefullOpen}\n                    >\n                    Expand Images\n                    </Button>\n               \n                    <ImageCarousel\n                   open={fullopen}\n                   handleClose={handlefullClose}\n                   onClose={handlefullClose}\n                    postImages={postImages}\n                    post={props.post}\n                    fetchPostImage={fetchPostImages}\n            \n                    />\n                \n            </>\n                    )\n\n    }\n\n\n\n}\n\n\n\nexport default PostImageUpload;\n"]},"metadata":{},"sourceType":"module"}