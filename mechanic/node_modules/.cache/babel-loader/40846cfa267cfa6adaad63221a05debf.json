{"ast":null,"code":"import _slicedToArray from \"/Users/roger/Projects/mechanic-frontend/mechanic/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/roger/Projects/mechanic-frontend/mechanic/src/components/CarImgUpload.js\";\n\n/**\n * Dependencies\n */\nimport React, { useEffect, useState } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { imagesRef } from '../helpers/firebase';\nimport axiosWithAuth from '../helpers/axiosWithAuth';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    Width: 200\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2)\n  },\n  container: {\n    display: 'flex',\n    flexWrap: 'wrap'\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 200\n  },\n  button: {\n    margin: theme.spacing(1)\n  }\n}));\n/**\n * Define component\n */\n\nfunction CarImgUpload(props) {\n  const _useState = useState({}),\n        _useState2 = _slicedToArray(_useState, 2),\n        file = _useState2[0],\n        setFile = _useState2[1];\n\n  function handleInputChanges(e) {\n    e.preventDefault();\n    const file = e.target.files[0];\n\n    if (!file) {\n      return;\n    }\n\n    if (file && file.size > 1e8) {\n      alert(\"File is too large. Maximum limit is 100MB.\");\n      e.target.value = '';\n    } else {\n      setFile(file);\n    }\n  }\n\n  function handleSubmitUploader(e) {\n    e.preventDefault(); // Create file ref (Example: /documents/:car_id/:file_name)\n\n    const fileRef = imagesRef.child(\"\".concat(props.case.id, \"/\").concat(file.name)); // Upload file\n\n    fileRef.put(file).then(snapshot => {\n      console.log('Upload success!', snapshot.constructor, snapshot);\n      axiosWithAuth().post(\"/cars/\".concat(props.car.id), {\n        file_name: file.name\n      }).then(res => {\n        console.log(\"success\");\n      }).catch(error => {\n        console.error(error);\n      });\n    });\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"form\", {\n    onSubmit: handleSubmitUploader,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    required: true,\n    id: \"uploader\",\n    type: \"file\",\n    accept: \"image/*,.pdf,.doc\",\n    onChange: handleInputChanges,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), React.createElement(Button, {\n    variant: \"contained\",\n    name: \"car_type\",\n    color: \"default\",\n    className: classes.button,\n    startIcon: React.createElement(CloudUploadIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }),\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"Upload\")));\n}\n/**\n *  Export component\n */\n\n\nexport default CarImgUpload;","map":{"version":3,"sources":["/Users/roger/Projects/mechanic-frontend/mechanic/src/components/CarImgUpload.js"],"names":["React","useEffect","useState","Typography","imagesRef","axiosWithAuth","Button","makeStyles","useStyles","theme","formControl","margin","spacing","Width","selectEmpty","marginTop","container","display","flexWrap","textField","marginLeft","marginRight","width","button","CarImgUpload","props","file","setFile","handleInputChanges","e","preventDefault","target","files","size","alert","value","handleSubmitUploader","fileRef","child","case","id","name","put","then","snapshot","console","log","constructor","post","car","file_name","res","catch","error","classes"],"mappings":"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","sourcesContent":["/**\n * Dependencies\n */\n\nimport React, { useEffect, useState } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { imagesRef } from '../helpers/firebase';\nimport axiosWithAuth from '../helpers/axiosWithAuth';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\n\n\n\n\nconst useStyles = makeStyles(theme => ({\n    formControl: {\n      margin: theme.spacing(1),\n      Width: 200,\n    },\n    selectEmpty: {\n      marginTop: theme.spacing(2),\n    },\n    container: {\n      display: 'flex',\n      flexWrap: 'wrap',\n    },\n    textField: {\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n      width: 200,\n    },\n    button: {\n      margin: theme.spacing(1),\n    },\n  }));\n/**\n * Define component\n */\n\nfunction CarImgUpload(props) {\n    const [file, setFile] = useState({});\n\n    function handleInputChanges(e) {\n        e.preventDefault();\n        const file = e.target.files[0]\n        if (!file) {\n            return;\n        }\n        if (file && file.size > 1e8) {\n            alert(\"File is too large. Maximum limit is 100MB.\")\n            e.target.value = ''\n        } else {\n            setFile(file);\n        }\n    }\n\n    function handleSubmitUploader(e) {\n        e.preventDefault()\n\n        // Create file ref (Example: /documents/:car_id/:file_name)\n        const fileRef = imagesRef.child(`${props.case.id}/${file.name}`)\n\n        // Upload file\n        fileRef.put(file).then((snapshot) => {\n            console.log('Upload success!', snapshot.constructor, snapshot);\n            axiosWithAuth().post(`/cars/${props.car.id}`, { file_name: file.name })\n                .then(res => {\n                    console.log(\"success\")\n                })\n                .catch(error => {\n                    console.error(error);\n                })\n        })\n    }\n\n   \n        return (\n            <>\n\n                <form onSubmit={handleSubmitUploader}>\n                \n\n                    <input required id=\"uploader\" type=\"file\" accept=\"image/*,.pdf,.doc\" onChange={handleInputChanges}></input>\n                    <Button\n                    variant=\"contained\"\n                    name=\"car_type\"\n                    color=\"default\"\n                    className={classes.button}\n                    startIcon={<CloudUploadIcon />}\n                    type =\"submit\"\n                    >\n                    Upload\n                </Button>\n                </form>\n            </>\n        )\n    \n}\n\n/**\n *  Export component\n */\n\nexport default CarImgUpload;\n"]},"metadata":{},"sourceType":"module"}