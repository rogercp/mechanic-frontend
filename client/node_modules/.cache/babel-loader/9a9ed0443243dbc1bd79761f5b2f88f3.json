{"ast":null,"code":"import _slicedToArray from \"/Users/roger/Projects/mechanic-frontend/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/roger/Projects/mechanic-frontend/client/src/components/ProfileImageShow.js\";\nimport React, { useEffect, useState } from 'react';\nimport { imagesRef } from '../helpers/firebase';\nimport { Image } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { fetchProfileImage } from \"../store/actions/settingsActions\";\n\nfunction ProfileImageShow(props) {\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        thisImage = _useState2[0],\n        setThisimage = _useState2[1]; // const [imagine,setImagine] = useState()\n\n\n  const _useState3 = useState(),\n        _useState4 = _slicedToArray(_useState3, 2),\n        fileState = _useState4[0],\n        setFileState = _useState4[1];\n\n  const userId = localStorage.getItem('id');\n  let fileRef = null;\n  console.log(props.userImage, \"image\");\n  useEffect(() => {\n    props.fetchProfileImage(userId);\n    fileRef = imagesRef.child(\"\".concat(userId, \"/\").concat(props.userImage && props.userImage.file_name));\n    console.log(props.userImage, \"image\");\n\n    if (props.userImage) {\n      function getImg() {\n        fileRef.getMetadata().then(metadata => {\n          fileRef.getDownloadURL().then(url => {\n            setThisimage(url); // let img = document.getElementById('document-image');\n            // if (metadata.contentType === 'application/pdf') {\n            //     img.src = '';\n            //     // TODO handle PDFs\n            //   } else {\n            //     img.src = url;\n            //   }\n          }).catch(err => {\n            console.error(err);\n          });\n        }).catch(err => {\n          console.error(err);\n        });\n      }\n\n      getImg();\n    }\n  }, []); //   props.fetchProfileImage(userId)\n  // if(props.userImage){\n  //   setImagine(props.userImage)\n  // }\n  //   const fileRef = imagesRef.child(`${userId}/${props.userImage ? props.userImage.file_name : \"0\"}`);\n  //   if(fileRef){\n  //     getImg(fileRef)    \n  //   }\n  //     function getImg(fileRef) {\n  //         fileRef.getMetadata().then((metadata) => {\n  //           fileRef.getDownloadURL().then(url => {\n  //             setThisimage(url)\n  //             // let img = document.getElementById('document-image');\n  //             // if (metadata.contentType === 'application/pdf') {\n  //             //     img.src = '';\n  //             //     // TODO handle PDFs\n  //             //   } else {\n  //             //     img.src = url;\n  //             //   }\n  //           })\n  //           .catch(err => {\n  //             console.error(err);\n  //           })\n  //         }).catch((err) => {\n  //           console.error(err);\n  //         });\n  //       }\n\n  return React.createElement(React.Fragment, null, React.createElement(Image, {\n    src: \"holder.js/171x180\",\n    rounded: true,\n    id: \"reg-image\",\n    style: {\n      height: \"200px\"\n    },\n    src: \"\".concat(thisImage),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }));\n}\n\nconst mapStateToProps = state => ({\n  userImage: state.setting.userImage\n});\n\nexport default connect(mapStateToProps, {\n  fetchProfileImage\n})(ProfileImageShow);","map":{"version":3,"sources":["/Users/roger/Projects/mechanic-frontend/client/src/components/ProfileImageShow.js"],"names":["React","useEffect","useState","imagesRef","Image","connect","fetchProfileImage","ProfileImageShow","props","thisImage","setThisimage","fileState","setFileState","userId","localStorage","getItem","fileRef","console","log","userImage","child","file_name","getImg","getMetadata","then","metadata","getDownloadURL","url","catch","err","error","height","mapStateToProps","state","setting"],"mappings":";;AAEA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,SAAT,QAA0B,qBAA1B;AACA,SAASC,KAAT,QAAsB,iBAAtB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,iBAAT,QAAkC,kCAAlC;;AAIA,SAASC,gBAAT,CAA0BC,KAA1B,EAAiC;AAAA,oBAEGN,QAAQ,CAAC,EAAD,CAFX;AAAA;AAAA,QAEtBO,SAFsB;AAAA,QAEZC,YAFY,kBAG7B;;;AAH6B,qBAIIR,QAAQ,EAJZ;AAAA;AAAA,QAItBS,SAJsB;AAAA,QAIZC,YAJY;;AAK7B,QAAMC,MAAM,GAAGC,YAAY,CAACC,OAAb,CAAqB,IAArB,CAAf;AAGA,MAAIC,OAAO,GAAG,IAAd;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAYV,KAAK,CAACW,SAAlB,EAA4B,OAA5B;AAEAlB,EAAAA,SAAS,CAAC,MAAM;AACdO,IAAAA,KAAK,CAACF,iBAAN,CAAwBO,MAAxB;AACAG,IAAAA,OAAO,GAAGb,SAAS,CAACiB,KAAV,WAAmBP,MAAnB,cAA6BL,KAAK,CAACW,SAAN,IAAmBX,KAAK,CAACW,SAAN,CAAgBE,SAAhE,EAAV;AAEAJ,IAAAA,OAAO,CAACC,GAAR,CAAYV,KAAK,CAACW,SAAlB,EAA4B,OAA5B;;AAEI,QAAGX,KAAK,CAACW,SAAT,EAAmB;AAEf,eAASG,MAAT,GAAkB;AAChBN,QAAAA,OAAO,CAACO,WAAR,GAAsBC,IAAtB,CAA4BC,QAAD,IAAc;AACvCT,UAAAA,OAAO,CAACU,cAAR,GAAyBF,IAAzB,CAA8BG,GAAG,IAAI;AAEnCjB,YAAAA,YAAY,CAACiB,GAAD,CAAZ,CAFmC,CAInC;AACA;AACA;AACA;AACA;AACA;AACA;AACD,WAXD,EAYCC,KAZD,CAYOC,GAAG,IAAI;AACZZ,YAAAA,OAAO,CAACa,KAAR,CAAcD,GAAd;AACD,WAdD;AAeD,SAhBD,EAgBGD,KAhBH,CAgBUC,GAAD,IAAS;AAChBZ,UAAAA,OAAO,CAACa,KAAR,CAAcD,GAAd;AACD,SAlBD;AAmBP;;AACDP,MAAAA,MAAM;AACP;AAEF,GAhCQ,EAgCN,EAhCM,CAAT,CAZ6B,CAkDjC;AAEA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAQI,SACI,0CAEI,oBAAC,KAAD;AAAO,IAAA,GAAG,EAAC,mBAAX;AAA+B,IAAA,OAAO,MAAtC;AAAuC,IAAA,EAAE,EAAC,WAA1C;AAAuD,IAAA,KAAK,EAAE;AAACS,MAAAA,MAAM,EAAC;AAAR,KAA9D;AAAgF,IAAA,GAAG,YAAKtB,SAAL,CAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CADJ;AAQH;;AAKD,MAAMuB,eAAe,GAAGC,KAAK,KAAK;AAChCd,EAAAA,SAAS,EAAGc,KAAK,CAACC,OAAN,CAAcf;AADM,CAAL,CAA7B;;AAGA,eAAed,OAAO,CACpB2B,eADoB,EAEpB;AAAC1B,EAAAA;AAAD,CAFoB,CAAP,CAGbC,gBAHa,CAAf","sourcesContent":["\n\nimport React, { useEffect, useState } from 'react';\nimport { imagesRef } from '../helpers/firebase';\nimport { Image } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { fetchProfileImage } from \"../store/actions/settingsActions\";\n\n\n\nfunction ProfileImageShow(props) {\n\n    const [thisImage,setThisimage]= useState('')\n    // const [imagine,setImagine] = useState()\n    const [fileState,setFileState] = useState()\n    const userId = localStorage.getItem('id');\n\n\n    let fileRef = null\n\n    console.log(props.userImage,\"image\")\n\n    useEffect(() => {\n      props.fetchProfileImage(userId)\n      fileRef = imagesRef.child(`${userId}/${props.userImage && props.userImage.file_name}`);\n      \n      console.log(props.userImage,\"image\")\n                \n          if(props.userImage){\n                \n              function getImg() {\n                fileRef.getMetadata().then((metadata) => {\n                  fileRef.getDownloadURL().then(url => {\n\n                    setThisimage(url)\n\n                    // let img = document.getElementById('document-image');\n                    // if (metadata.contentType === 'application/pdf') {\n                    //     img.src = '';\n                    //     // TODO handle PDFs\n                    //   } else {\n                    //     img.src = url;\n                    //   }\n                  })\n                  .catch(err => {\n                    console.error(err);\n                  })\n                }).catch((err) => {\n                  console.error(err);\n                });\n        }\n        getImg()\n      }\n \n    }, []);\n   \n\n    \n\n  \n//   props.fetchProfileImage(userId)\n\n// if(props.userImage){\n//   setImagine(props.userImage)\n// }\n\n//   const fileRef = imagesRef.child(`${userId}/${props.userImage ? props.userImage.file_name : \"0\"}`);\n  \n//   if(fileRef){\n    \n//     getImg(fileRef)    \n//   }\n   \n//     function getImg(fileRef) {\n      \n//         fileRef.getMetadata().then((metadata) => {\n//           fileRef.getDownloadURL().then(url => {\n  \n//             setThisimage(url)\n  \n//             // let img = document.getElementById('document-image');\n//             // if (metadata.contentType === 'application/pdf') {\n//             //     img.src = '';\n//             //     // TODO handle PDFs\n//             //   } else {\n//             //     img.src = url;\n//             //   }\n//           })\n//           .catch(err => {\n//             console.error(err);\n//           })\n//         }).catch((err) => {\n//           console.error(err);\n//         });\n//       }\n    \n  \n\n\n\n\n\n    return(\n        <>\n            {/* {(metadata.contentType === 'application/pdf')? <div id=\"div-pdf\" src={`${thisImage}`}></div> :  <img id=\"reg-image\" height=\"200px\" src={`${thisImage}`}></img>} */}\n            <Image src=\"holder.js/171x180\" rounded id=\"reg-image\"  style={{height:\"200px\"}} src={`${thisImage}`}/>\n            {/* {props.image.file_name} */}\n\n        </>\n    )\n}\n\n\n\n\nconst mapStateToProps = state => ({\n  userImage : state.setting.userImage\n});\nexport default connect(\n  mapStateToProps,\n  {fetchProfileImage}\n)(ProfileImageShow);\n"]},"metadata":{},"sourceType":"module"}