{"ast":null,"code":"var _jsxFileName = \"/Users/roger/Projects/mechanic-frontend/client/src/routes/helpers/PrivateRoute.js\";\nimport React from 'react';\nimport { Route } from 'react-router-dom';\nimport firebase from 'firebase';\nimport uuid from 'uuid';\nimport axios from 'axios';\n\nconst PrivateRoute = ({\n  component: Component,\n  errorBoundary: ErrorBoundary,\n  path,\n  exact\n}) => {\n  firebase.auth().onAuthStateChanged(async user => {\n    if (user) {\n      let displayName = user.displayName;\n      let email = user.email;\n      let emailVerified = user.emailVerified;\n      let photoURL = user.photoURL;\n      let isAnonymous = user.isAnonymous;\n      let uid = user.uid;\n      let providerData = user.providerData;\n      let token = await user.getIdToken();\n      localStorage.setItem('token', token);\n      axios.post(`${process.env.REACT_APP_API_URL}/users/auth`, {\n        user: user,\n        token: token\n      }).then(res => {\n        localStorage.setItem('id', res.data.id);\n      }).catch(err => {\n        console.log(err);\n      });\n    } else {// User is signed out.\n      // ...\n    }\n  });\n\n  if (exact) {\n    return /*#__PURE__*/React.createElement(Route, {\n      key: uuid.v4(),\n      exact: true,\n      path: path,\n      render: props => /*#__PURE__*/React.createElement(ErrorBoundary, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Component, Object.assign({}, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 9\n        }\n      }))),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 12\n      }\n    });\n  } else {\n    return /*#__PURE__*/React.createElement(Route, {\n      key: uuid.v4(),\n      path: path,\n      render: props => /*#__PURE__*/React.createElement(ErrorBoundary, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Component, Object.assign({}, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 9\n        }\n      }))),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 12\n      }\n    });\n  }\n};\n\nexport default PrivateRoute;","map":{"version":3,"sources":["/Users/roger/Projects/mechanic-frontend/client/src/routes/helpers/PrivateRoute.js"],"names":["React","Route","firebase","uuid","axios","PrivateRoute","component","Component","errorBoundary","ErrorBoundary","path","exact","auth","onAuthStateChanged","user","displayName","email","emailVerified","photoURL","isAnonymous","uid","providerData","token","getIdToken","localStorage","setItem","post","process","env","REACT_APP_API_URL","then","res","data","id","catch","err","console","log","v4","props"],"mappings":";AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAGA,MAAMC,YAAY,GAAG,CAAC;AAAEC,EAAAA,SAAS,EAAEC,SAAb;AAAwBC,EAAAA,aAAa,EAAEC,aAAvC;AAAsDC,EAAAA,IAAtD;AAA4DC,EAAAA;AAA5D,CAAD,KAAyE;AAE5FT,EAAAA,QAAQ,CAACU,IAAT,GAAgBC,kBAAhB,CAAmC,MAAOC,IAAP,IAAgB;AACjD,QAAIA,IAAJ,EAAU;AAER,UAAIC,WAAW,GAAGD,IAAI,CAACC,WAAvB;AACA,UAAIC,KAAK,GAAGF,IAAI,CAACE,KAAjB;AACA,UAAIC,aAAa,GAAGH,IAAI,CAACG,aAAzB;AACA,UAAIC,QAAQ,GAAGJ,IAAI,CAACI,QAApB;AACA,UAAIC,WAAW,GAAGL,IAAI,CAACK,WAAvB;AACA,UAAIC,GAAG,GAAGN,IAAI,CAACM,GAAf;AACA,UAAIC,YAAY,GAAGP,IAAI,CAACO,YAAxB;AAGA,UAAIC,KAAK,GAAG,MAAMR,IAAI,CAACS,UAAL,EAAlB;AAEAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,KAA9B;AAEAlB,MAAAA,KAAK,CAACsB,IAAN,CAAY,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,aAA5C,EAA0D;AACxDf,QAAAA,IAAI,EAAEA,IADkD;AAExDQ,QAAAA,KAAK,EAAEA;AAFiD,OAA1D,EAGGQ,IAHH,CAGQC,GAAG,IAAI;AACbP,QAAAA,YAAY,CAACC,OAAb,CAAqB,IAArB,EAA2BM,GAAG,CAACC,IAAJ,CAASC,EAApC;AACD,OALD,EAKGC,KALH,CAKSC,GAAG,IAAI;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,OAPD;AAQD,KAvBD,MAuBO,CACL;AACA;AACD;AACF,GA5BD;;AA8BA,MAAIxB,KAAJ,EAAW;AACT,wBAAO,oBAAC,KAAD;AAAO,MAAA,GAAG,EAAER,IAAI,CAACmC,EAAL,EAAZ;AAAuB,MAAA,KAAK,MAA5B;AAA6B,MAAA,IAAI,EAAE5B,IAAnC;AAAyC,MAAA,MAAM,EAAE6B,KAAK,iBAC3D,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,SAAD,oBAAeA,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF,CADK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AAKD,GAND,MAMO;AACL,wBAAO,oBAAC,KAAD;AAAO,MAAA,GAAG,EAAEpC,IAAI,CAACmC,EAAL,EAAZ;AAAuB,MAAA,IAAI,EAAE5B,IAA7B;AAAmC,MAAA,MAAM,EAAE6B,KAAK,iBACrD,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,SAAD,oBAAeA,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF,CADK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AAKD;AAEF,CA9CD;;AAkDA,eAAelC,YAAf","sourcesContent":["\nimport React from 'react';\nimport { Route } from 'react-router-dom';\nimport firebase from 'firebase';\nimport uuid from 'uuid';\nimport axios from 'axios';\n\n\nconst PrivateRoute = ({ component: Component, errorBoundary: ErrorBoundary, path, exact }) => {\n\n  firebase.auth().onAuthStateChanged(async (user) => {\n    if (user) {\n\n      let displayName = user.displayName;\n      let email = user.email;\n      let emailVerified = user.emailVerified;\n      let photoURL = user.photoURL;\n      let isAnonymous = user.isAnonymous;\n      let uid = user.uid;\n      let providerData = user.providerData;\n\n\n      let token = await user.getIdToken()\n\n      localStorage.setItem('token', token)\n\n      axios.post(`${process.env.REACT_APP_API_URL}/users/auth`, {\n        user: user,\n        token: token\n      }).then(res => {\n        localStorage.setItem('id', res.data.id)\n      }).catch(err => {\n        console.log(err)\n      });\n    } else {\n      // User is signed out.\n      // ...\n    }\n  })\n\n  if (exact) {\n    return <Route key={uuid.v4()} exact path={path} render={props => (\n      <ErrorBoundary>\n        <Component {...props} />\n      </ErrorBoundary>\n    )} />\n  } else {\n    return <Route key={uuid.v4()} path={path} render={props => (\n      <ErrorBoundary>\n        <Component {...props} />\n      </ErrorBoundary>\n    )} />\n  }\n\n}\n\n\n\nexport default PrivateRoute;\n"]},"metadata":{},"sourceType":"module"}