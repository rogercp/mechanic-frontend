{"ast":null,"code":"import _slicedToArray from \"/Users/roger/Projects/mechanic-frontend/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/roger/Projects/mechanic-frontend/client/src/components/ProfileImageShow.js\";\nimport React, { useEffect, useState } from 'react';\nimport { imagesRef } from '../helpers/firebase';\nimport { Image } from 'react-bootstrap';\nimport { fetchProfileImage } from \"../store/actions/settingsActions\";\nimport { connect } from 'react-redux';\nimport { axiosWithAuth } from '../helpers/index';\nimport Avatar from '@material-ui/core/Avatar';\nimport { makeStyles } from '@material-ui/core/styles';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    '& > *': {\n      margin: theme.spacing(1)\n    }\n  }\n}));\n\nfunction ProfileImageShow(props) {\n  const classes = useStyles();\n\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        thisImage = _useState2[0],\n        setThisimage = _useState2[1];\n\n  const userId = localStorage.getItem('id');\n  console.log(userId, \"userId\");\n  console.log(props.image.file);\n  var fileRef = null;\n\n  if (props.isPost) {\n    fileRef = imagesRef.child(\"\".concat(props.post, \"/\").concat(props.post.file_name));\n  } else {\n    fileRef = imagesRef.child(\"\".concat(userId, \"/\").concat(props.image.file_name));\n  }\n\n  useEffect(() => {\n    getImg();\n  }, []);\n\n  function getImg() {\n    fileRef.getMetadata().then(metadata => {\n      fileRef.getDownloadURL().then(url => {\n        setThisimage(url); // let img = document.getElementById('document-image');\n        // if (metadata.contentType === 'application/pdf') {\n        //     img.src = '';\n        //     // TODO handle PDFs\n        //   } else {\n        //     img.src = url;\n        //   }\n      }).catch(err => {\n        console.error(err);\n      });\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  function deleteImage() {\n    fileRef.delete().then(() => {\n      console.log(\"hitting\");\n      console.log(props.image.id, \"422\");\n      axiosWithAuth().delete(\"/users/imagee/\".concat(props.image.id)).then(res => {\n        props.fetchProfileImage(userId);\n      }).catch(error => {\n        console.error(error);\n      });\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  const username = localStorage.getItem(\"username\");\n\n  if (props.isCirclePic) {\n    return React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        alignItems: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(Avatar, {\n      alt: \"Remy Sharp\",\n      src: \"\".concat(thisImage),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }), React.createElement(\"h5\", {\n      style: {\n        marginLeft: \"5px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, props.isPost ? props.post.user_name : username));\n  } else {\n    return React.createElement(React.Fragment, null, React.createElement(\"button\", {\n      onClick: deleteImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"del\"), React.createElement(Image, {\n      src: \"holder.js/171x180\",\n      rounded: true,\n      id: \"reg-image\",\n      style: {\n        maxWidth: \"100%\"\n      },\n      src: \"\".concat(thisImage),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }));\n  }\n}\n\nconst mapStateToProps = state => ({});\n\nexport default connect(mapStateToProps, {\n  fetchProfileImage\n})(ProfileImageShow);","map":{"version":3,"sources":["/Users/roger/Projects/mechanic-frontend/client/src/components/ProfileImageShow.js"],"names":["React","useEffect","useState","imagesRef","Image","fetchProfileImage","connect","axiosWithAuth","Avatar","makeStyles","useStyles","theme","root","display","margin","spacing","ProfileImageShow","props","classes","thisImage","setThisimage","userId","localStorage","getItem","console","log","image","file","fileRef","isPost","child","post","file_name","getImg","getMetadata","then","metadata","getDownloadURL","url","catch","err","error","deleteImage","delete","id","res","username","isCirclePic","alignItems","marginLeft","user_name","maxWidth","mapStateToProps","state"],"mappings":"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","sourcesContent":["\n\nimport React, { useEffect, useState } from 'react';\nimport { imagesRef } from '../helpers/firebase';\nimport { Image } from 'react-bootstrap';\nimport { fetchProfileImage } from \"../store/actions/settingsActions\";\nimport { connect } from 'react-redux';\nimport { axiosWithAuth } from '../helpers/index';\nimport Avatar from '@material-ui/core/Avatar';\nimport { makeStyles } from '@material-ui/core/styles';\n\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    '& > *': {\n      margin: theme.spacing(1),\n    },\n  },\n}));\n\nfunction ProfileImageShow(props) {\n\n    const classes = useStyles();\n\n    const [thisImage,setThisimage]= useState('')\n  \n    const userId = localStorage.getItem('id');\n\n    console.log(userId,\"userId\")\n    console.log(props.image.file)\n\n  var fileRef = null\n\n  if(props.isPost){\n    fileRef = imagesRef.child(`${props.post}/${props.post.file_name}`);\n  }else{\n    fileRef = imagesRef.child(`${userId}/${props.image.file_name}`);\n  }\n    \n\n    useEffect(() => {\n      getImg()\n    }, []);\n       \n      function getImg() {\n        fileRef.getMetadata().then((metadata) => {\n          fileRef.getDownloadURL().then(url => {\n\n            setThisimage(url)\n\n            // let img = document.getElementById('document-image');\n            // if (metadata.contentType === 'application/pdf') {\n            //     img.src = '';\n            //     // TODO handle PDFs\n            //   } else {\n            //     img.src = url;\n            //   }\n          })\n          .catch(err => {\n            console.error(err);\n          })\n        }).catch((err) => {\n          console.error(err);\n        });\n}\n\n  function deleteImage(){\n\n    fileRef.delete().then(()=>{\n     console.log(\"hitting\")\n     console.log(props.image.id,\"422\")\n      axiosWithAuth().delete(`/users/imagee/${props.image.id}`)\n      .then(res => {\n        props.fetchProfileImage(userId)       \n       })\n      .catch(error => {\n          console.error(error);\n      })\n    })\n    .catch(err => {\n            console.error(err);\n    })\n}\n\nconst username = localStorage.getItem(\"username\");\n\n  if(props.isCirclePic){\n    return (\n      \n      <div style={{display:\"flex\", alignItems:\"center\"}}>\n      <Avatar alt=\"Remy Sharp\" src={`${thisImage}`} />\n        <h5 style={{marginLeft:\"5px\"}}>{props.isPost ? props.post.user_name : username}</h5>\n        </div>\n    )\n  }else{\n    return(\n      <>\n          \n          {/* {(metadata.contentType === 'application/pdf')? <div id=\"div-pdf\" src={`${thisImage}`}></div> :  <img id=\"reg-image\" height=\"200px\" src={`${thisImage}`}></img>} */}\n          \n         \n\n        <button onClick={deleteImage}>del</button>\n          <Image src=\"holder.js/171x180\" rounded id=\"reg-image\"  style={{maxWidth: \"100%\"}} src={`${thisImage}`}/>\n          {/* {props.image.file_name} */}\n\n      </>\n  )\n  }\n\n    \n}\n\n\n\n\nconst mapStateToProps = state => ({\n});\nexport default connect(\n  mapStateToProps,\n  {fetchProfileImage}\n)(ProfileImageShow);"]},"metadata":{},"sourceType":"module"}