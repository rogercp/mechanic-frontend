{"ast":null,"code":"var _jsxFileName = \"/Users/roger/Projects/mechanic-frontend/client/src/components/ProfileImageShow.js\";\nimport React, { useEffect, useState } from 'react';\nimport { imagesRef } from '../helpers/firebase';\nimport { Image } from 'react-bootstrap';\nimport { fetchProfileImage } from \"../store/actions/settingsActions\";\nimport { connect } from 'react-redux';\nimport Avatar from '@material-ui/core/Avatar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ImageIcon from '@material-ui/icons/Image';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    '& > *': {\n      margin: theme.spacing(1)\n    }\n  }\n}));\n\nfunction ProfileImageShow(props) {\n  const classes = useStyles();\n  const [thisImage, setThisimage] = useState(null);\n  const userId = localStorage.getItem('id');\n  const username = localStorage.getItem(\"username\");\n  var fileRef = null; // the first handles the post image \n  // the second handles user images for settings and navbar\n\n  if (props.isPost === true) {\n    fileRef = imagesRef.child(`${props.post.user_id}/${props.post.file_name_profile}`);\n  } else {\n    fileRef = imagesRef.child(`${userId}/${props.image.file_name_profile}`);\n  }\n\n  useEffect(() => {\n    // set image to empty so on filtering and searching image transitions nicely\n    setThisimage(null);\n    getImg();\n  }, [props.post, props.userImage]);\n\n  function getImg() {\n    fileRef.getMetadata().then(metadata => {\n      fileRef.getDownloadURL().then(url => {\n        setThisimage(url); // let img = document.getElementById('document-image');\n        // if (metadata.contentType === 'application/pdf') {\n        //     img.src = '';\n        //     // TODO handle PDFs\n        //   } else {\n        //     img.src = url;\n        //   }\n      }).catch(err => {\n        console.error(err);\n      });\n    }).catch(err => {\n      console.error(err);\n    });\n  } // function deleteImage() {\n  //   fileRef.delete().then(() => {\n  //     axiosWithAuth().delete(`/users/imagee/${props.image.file_name_profile}`)\n  //       .then(res => {\n  //         props.fetchProfileImage(userId)\n  //       })\n  //       .catch(error => {\n  //         console.error(error);\n  //       })\n  //   })\n  //     .catch(err => {\n  //       console.error(err);\n  //     })\n  // }\n  // Handles image for post \n\n\n  if (props.isCirclePic && props.isPostPic) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, thisImage ? /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Avatar, {\n      alt: \"Remy Sharp\",\n      src: `${thisImage}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 18\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: \"8px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        marginLeft: \"5px\",\n        color: \"#0275d8\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 47\n      }\n    }, props.isPost ? props.post.user_name : username))) : /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ImageIcon, {\n      style: {\n        fontSize: \"50px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }), props.post.user_name));\n  } // handles image for users navbar\n\n\n  if (props.isCirclePic) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, thisImage ? /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Avatar, {\n      alt: \"Remy Sharp\",\n      src: `${thisImage}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 18\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: \"8px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        marginLeft: \"5px\",\n        color: \"#0275d8\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 47\n      }\n    }, props.isPost ? props.post.user_name : username))) : /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ImageIcon, {\n      style: {\n        fontSize: \"50px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }\n    }), username));\n  } // handles image in user settings\n  else {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, thisImage ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Image, {\n        src: \"holder.js/171x180\",\n        rounded: true,\n        id: \"reg-image\",\n        style: {\n          maxWidth: \"100%\"\n        },\n        src: `${thisImage}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }\n      })) : /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(ImageIcon, {\n        style: {\n          fontSize: \"200px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }\n      })));\n    }\n}\n\nconst mapStateToProps = state => ({\n  userImage: state.setting.userImage\n});\n\nexport default connect(mapStateToProps, {\n  fetchProfileImage\n})(ProfileImageShow);","map":{"version":3,"sources":["/Users/roger/Projects/mechanic-frontend/client/src/components/ProfileImageShow.js"],"names":["React","useEffect","useState","imagesRef","Image","fetchProfileImage","connect","Avatar","makeStyles","ImageIcon","useStyles","theme","root","display","margin","spacing","ProfileImageShow","props","classes","thisImage","setThisimage","userId","localStorage","getItem","username","fileRef","isPost","child","post","user_id","file_name_profile","image","getImg","userImage","getMetadata","then","metadata","getDownloadURL","url","catch","err","console","error","isCirclePic","isPostPic","alignItems","justifyContent","marginTop","marginLeft","color","user_name","fontSize","maxWidth","mapStateToProps","state","setting"],"mappings":"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","sourcesContent":["\n\nimport React, { useEffect, useState } from 'react';\nimport { imagesRef } from '../helpers/firebase';\nimport { Image } from 'react-bootstrap';\nimport { fetchProfileImage } from \"../store/actions/settingsActions\";\nimport { connect } from 'react-redux';\nimport Avatar from '@material-ui/core/Avatar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ImageIcon from '@material-ui/icons/Image';\n\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    '& > *': {\n      margin: theme.spacing(1),\n    },\n  },\n}));\n\nfunction ProfileImageShow(props) {\n\n  const classes = useStyles();\n\n  const [thisImage, setThisimage] = useState(null)\n\n  const userId = localStorage.getItem('id');\n\n  const username = localStorage.getItem(\"username\");\n\n  var fileRef = null\n\n  // the first handles the post image \n  // the second handles user images for settings and navbar\n  if (props.isPost === true) {\n    fileRef = imagesRef.child(`${props.post.user_id}/${props.post.file_name_profile}`);\n  } else {\n    fileRef = imagesRef.child(`${userId}/${props.image.file_name_profile}`);\n  }\n\n\n  useEffect(() => {\n    // set image to empty so on filtering and searching image transitions nicely\n    setThisimage(null)\n    getImg()\n  }, [props.post,props.userImage]);\n\n  function getImg() {\n    fileRef.getMetadata().then((metadata) => {\n      fileRef.getDownloadURL().then(url => {\n\n        setThisimage(url)\n\n        // let img = document.getElementById('document-image');\n        // if (metadata.contentType === 'application/pdf') {\n        //     img.src = '';\n        //     // TODO handle PDFs\n        //   } else {\n        //     img.src = url;\n        //   }\n      })\n        .catch(err => {\n          console.error(err);\n        })\n    }).catch((err) => {\n      console.error(err);\n    });\n  }\n\n\n  // function deleteImage() {\n\n  //   fileRef.delete().then(() => {\n\n  //     axiosWithAuth().delete(`/users/imagee/${props.image.file_name_profile}`)\n  //       .then(res => {\n  //         props.fetchProfileImage(userId)\n  //       })\n  //       .catch(error => {\n  //         console.error(error);\n  //       })\n  //   })\n  //     .catch(err => {\n  //       console.error(err);\n  //     })\n  // }\n\n\n  // Handles image for post \n  if (props.isCirclePic && props.isPostPic) {\n    return (\n      <>\n        {thisImage ?\n          <div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }}>\n            <div><Avatar alt=\"Remy Sharp\" src={`${thisImage}`} /></div>\n            <div style={{ marginTop: \"8px\" }}><p style={{ marginLeft: \"5px\" ,color:\"#0275d8\"}}>{props.isPost ? props.post.user_name : username}</p>\n            </div>\n          </div>\n\n          :\n          <div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }}>\n            <ImageIcon style={{ fontSize: \"50px\" }} />\n            {props.post.user_name} \n          </div>}\n      </>\n\n\n\n\n    )\n  }\n  // handles image for users navbar\n  if(props.isCirclePic) {\n    \n    return (\n\n      <>\n        {thisImage ?\n          <div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }}>\n            <div><Avatar alt=\"Remy Sharp\" src={`${thisImage}`} /></div>\n            <div style={{ marginTop: \"8px\" }}><p style={{ marginLeft: \"5px\" ,color:\"#0275d8\" }}>{props.isPost ? props.post.user_name : username}</p>\n            </div>\n          </div>\n\n          :\n          <div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }}>\n            <ImageIcon style={{ fontSize: \"50px\" }} />\n            {username} \n          </div>}\n      </>\n\n\n    )\n\n  }\n  // handles image in user settings\n  else {\n    return (\n      <>\n\n        {thisImage ?\n          <div>\n            {/* {(metadata.contentType === 'application/pdf')? <div id=\"div-pdf\" src={`${thisImage}`}></div> :  <img id=\"reg-image\" height=\"200px\" src={`${thisImage}`}></img>} */}\n\n            {/* <button onClick={deleteImage}>del</button> */}\n\n            <Image src=\"holder.js/171x180\" rounded id=\"reg-image\" style={{ maxWidth: \"100%\" }} src={`${thisImage}`} />\n            {/* {props.image.file_name} */}\n          </div>\n          : <div>\n            <ImageIcon style={{ fontSize: \"200px\" }} />\n          </div>}\n\n      </>\n    )\n  }\n\n\n}\n\n\n\n\nconst mapStateToProps = state => ({\n  userImage: state.setting.userImage\n});\nexport default connect(\n  mapStateToProps,\n  { fetchProfileImage }\n)(ProfileImageShow);"]},"metadata":{},"sourceType":"module"}