{"ast":null,"code":"import _slicedToArray from \"/Users/roger/Projects/mechanic-frontend/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/roger/Projects/mechanic-frontend/client/src/components/ProfileImageShow.js\";\nimport React, { useEffect, useState } from 'react';\nimport { imagesRef } from '../helpers/firebase';\nimport { Image } from 'react-bootstrap';\n\nfunction ProfileImageShow(props) {\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        thisImage = _useState2[0],\n        setThisimage = _useState2[1];\n\n  const userId = localStorage.getItem('id');\n  const fileRef = imagesRef.child(\"\".concat(userId, \"/\").concat(props.image.file_name));\n  useEffect(() => {\n    getImg();\n  }, []);\n\n  function getImg() {\n    fileRef.getMetadata().then(metadata => {\n      fileRef.getDownloadURL().then(url => {\n        setThisimage(url); // let img = document.getElementById('document-image');\n        // if (metadata.contentType === 'application/pdf') {\n        //     img.src = '';\n        //     // TODO handle PDFs\n        //   } else {\n        //     img.src = url;\n        //   }\n      }).catch(err => {\n        console.error(err);\n      });\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  function deleteImage() {\n    fileRef.delete().then(() => {\n      axiosWithAuth().delete(\"/users/image/\".concat(props.image.id)).then(res => {\n        props.fetchProfileImage;\n      }).catch(error => {\n        console.error(error);\n      });\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"button\", {\n    onClick: deleteImage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"del\"), React.createElement(Image, {\n    src: \"holder.js/171x180\",\n    rounded: true,\n    id: \"reg-image\",\n    style: {\n      height: \"200px\"\n    },\n    src: \"\".concat(thisImage),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }));\n}\n\nconst mapStateToProps = state => ({});\n\nexport default connect(mapStateToProps, {\n  fetchProfileImage\n})(ProfileImageShow);","map":{"version":3,"sources":["/Users/roger/Projects/mechanic-frontend/client/src/components/ProfileImageShow.js"],"names":["React","useEffect","useState","imagesRef","Image","ProfileImageShow","props","thisImage","setThisimage","userId","localStorage","getItem","fileRef","child","image","file_name","getImg","getMetadata","then","metadata","getDownloadURL","url","catch","err","console","error","deleteImage","delete","axiosWithAuth","id","res","fetchProfileImage","height","mapStateToProps","state","connect"],"mappings":";;AAEA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,SAAT,QAA0B,qBAA1B;AACA,SAASC,KAAT,QAAsB,iBAAtB;;AAIA,SAASC,gBAAT,CAA0BC,KAA1B,EAAiC;AAAA,oBAEGJ,QAAQ,CAAC,EAAD,CAFX;AAAA;AAAA,QAEtBK,SAFsB;AAAA,QAEZC,YAFY;;AAK7B,QAAMC,MAAM,GAAGC,YAAY,CAACC,OAAb,CAAqB,IAArB,CAAf;AAEA,QAAMC,OAAO,GAAGT,SAAS,CAACU,KAAV,WAAmBJ,MAAnB,cAA6BH,KAAK,CAACQ,KAAN,CAAYC,SAAzC,EAAhB;AAGAd,EAAAA,SAAS,CAAC,MAAM;AACde,IAAAA,MAAM;AACP,GAFQ,EAEN,EAFM,CAAT;;AAIE,WAASA,MAAT,GAAkB;AAChBJ,IAAAA,OAAO,CAACK,WAAR,GAAsBC,IAAtB,CAA4BC,QAAD,IAAc;AACvCP,MAAAA,OAAO,CAACQ,cAAR,GAAyBF,IAAzB,CAA8BG,GAAG,IAAI;AAEnCb,QAAAA,YAAY,CAACa,GAAD,CAAZ,CAFmC,CAInC;AACA;AACA;AACA;AACA;AACA;AACA;AACD,OAXD,EAYCC,KAZD,CAYOC,GAAG,IAAI;AACZC,QAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;AACD,OAdD;AAeD,KAhBD,EAgBGD,KAhBH,CAgBUC,GAAD,IAAS;AAChBC,MAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;AACD,KAlBD;AAmBP;;AAEC,WAASG,WAAT,GAAsB;AAEpBd,IAAAA,OAAO,CAACe,MAAR,GAAiBT,IAAjB,CAAsB,MAAI;AAExBU,MAAAA,aAAa,GAAGD,MAAhB,wBAAuCrB,KAAK,CAACQ,KAAN,CAAYe,EAAnD,GACCX,IADD,CACMY,GAAG,IAAI;AACNxB,QAAAA,KAAK,CAAEyB,iBAAP;AACL,OAHF,EAICT,KAJD,CAIOG,KAAK,IAAI;AACZD,QAAAA,OAAO,CAACC,KAAR,CAAcA,KAAd;AACH,OAND;AAOD,KATD,EAUCH,KAVD,CAUOC,GAAG,IAAI;AACNC,MAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;AACP,KAZD;AAaH;;AAIG,SACI,0CAGE;AAAQ,IAAA,OAAO,EAAEG,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAHF,EAII,oBAAC,KAAD;AAAO,IAAA,GAAG,EAAC,mBAAX;AAA+B,IAAA,OAAO,MAAtC;AAAuC,IAAA,EAAE,EAAC,WAA1C;AAAuD,IAAA,KAAK,EAAE;AAACM,MAAAA,MAAM,EAAC;AAAR,KAA9D;AAAgF,IAAA,GAAG,YAAKzB,SAAL,CAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,CADJ;AAUH;;AAKD,MAAM0B,eAAe,GAAGC,KAAK,KAAK,EAAL,CAA7B;;AAEA,eAAeC,OAAO,CACpBF,eADoB,EAEpB;AAACF,EAAAA;AAAD,CAFoB,CAAP,CAGb1B,gBAHa,CAAf","sourcesContent":["\n\nimport React, { useEffect, useState } from 'react';\nimport { imagesRef } from '../helpers/firebase';\nimport { Image } from 'react-bootstrap';\n\n\n\nfunction ProfileImageShow(props) {\n\n    const [thisImage,setThisimage]= useState('')\n  \n\n    const userId = localStorage.getItem('id');\n\n    const fileRef = imagesRef.child(`${userId}/${props.image.file_name}`);\n\n    \n    useEffect(() => {\n      getImg()\n    }, []);\n       \n      function getImg() {\n        fileRef.getMetadata().then((metadata) => {\n          fileRef.getDownloadURL().then(url => {\n\n            setThisimage(url)\n\n            // let img = document.getElementById('document-image');\n            // if (metadata.contentType === 'application/pdf') {\n            //     img.src = '';\n            //     // TODO handle PDFs\n            //   } else {\n            //     img.src = url;\n            //   }\n          })\n          .catch(err => {\n            console.error(err);\n          })\n        }).catch((err) => {\n          console.error(err);\n        });\n}\n\n  function deleteImage(){\n\n    fileRef.delete().then(()=>{\n     \n      axiosWithAuth().delete(`/users/image/${props.image.id}`)\n      .then(res => {\n             props. fetchProfileImage        \n       })\n      .catch(error => {\n          console.error(error);\n      })\n    })\n    .catch(err => {\n            console.error(err);\n    })\n}\n\n  \n\n    return(\n        <>\n            \n            {/* {(metadata.contentType === 'application/pdf')? <div id=\"div-pdf\" src={`${thisImage}`}></div> :  <img id=\"reg-image\" height=\"200px\" src={`${thisImage}`}></img>} */}\n          <button onClick={deleteImage}>del</button>\n            <Image src=\"holder.js/171x180\" rounded id=\"reg-image\"  style={{height:\"200px\"}} src={`${thisImage}`}/>\n            {/* {props.image.file_name} */}\n\n        </>\n    )\n}\n\n\n\n\nconst mapStateToProps = state => ({\n});\nexport default connect(\n  mapStateToProps,\n  {fetchProfileImage}\n)(ProfileImageShow);"]},"metadata":{},"sourceType":"module"}