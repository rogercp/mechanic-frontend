{"ast":null,"code":"var _jsxFileName = \"/Users/roger/Projects/mechanic-front/mechanic-frontend/mechanic/src/views/AuthCallBack.js\";\nimport React from \"react\";\nimport firebase from \"firebase\";\nimport axios from \"axios\";\n/**\n * Define \n */\n\nfunction AuthCallBack(props) {\n  firebase.auth().onAuthStateChanged(async user => {\n    console.log(\"Authcallbackl\"); // User is signed in.\n\n    if (user) {\n      let token = await user.getIdToken();\n      localStorage.setItem(\"token\", token);\n      axios.post(\"\".concat(process.env.REACT_APP_API_URL, \"/users/auth\"), {\n        user: user,\n        token: token\n      }).then(res => {\n        console.log(res.data, \"data\");\n        localStorage.setItem(\"id\", res.data.id);\n        window.location = \"/home\";\n      }).catch(err => {\n        console.error(err);\n        window.location = \"/login\";\n      });\n    } else {\n      // User is signed out.\n      window.location = \"/login\";\n    }\n  });\n  return React.createElement(\"div\", {\n    className: \"login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  });\n}\n/**\n * Export view\n */\n\n\nexport default AuthCallBack;","map":{"version":3,"sources":["/Users/roger/Projects/mechanic-front/mechanic-frontend/mechanic/src/views/AuthCallBack.js"],"names":["React","firebase","axios","AuthCallBack","props","auth","onAuthStateChanged","user","console","log","token","getIdToken","localStorage","setItem","post","process","env","REACT_APP_API_URL","then","res","data","id","window","location","catch","err","error"],"mappings":";AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAGA;;;;AAIA,SAASC,YAAT,CAAsBC,KAAtB,EAA6B;AACzBH,EAAAA,QAAQ,CAACI,IAAT,GAAgBC,kBAAhB,CAAmC,MAAMC,IAAN,IAAc;AAC7CC,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAD6C,CAE7C;;AACA,QAAIF,IAAJ,EAAU;AACN,UAAIG,KAAK,GAAG,MAAMH,IAAI,CAACI,UAAL,EAAlB;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,KAA9B;AAEAR,MAAAA,KAAK,CACAY,IADL,WACaC,OAAO,CAACC,GAAR,CAAYC,iBADzB,kBACyD;AACjDV,QAAAA,IAAI,EAAEA,IAD2C;AAEjDG,QAAAA,KAAK,EAAEA;AAF0C,OADzD,EAKKQ,IALL,CAKUC,GAAG,IAAI;AACTX,QAAAA,OAAO,CAACC,GAAR,CAAYU,GAAG,CAACC,IAAhB,EAAuB,MAAvB;AACAR,QAAAA,YAAY,CAACC,OAAb,CAAqB,IAArB,EAA2BM,GAAG,CAACC,IAAJ,CAASC,EAApC;AACAC,QAAAA,MAAM,CAACC,QAAP,GAAkB,OAAlB;AACH,OATL,EAUKC,KAVL,CAUWC,GAAG,IAAI;AACVjB,QAAAA,OAAO,CAACkB,KAAR,CAAcD,GAAd;AACAH,QAAAA,MAAM,CAACC,QAAP,GAAkB,QAAlB;AACH,OAbL;AAcH,KAlBD,MAkBO;AACH;AACAD,MAAAA,MAAM,CAACC,QAAP,GAAkB,QAAlB;AACH;AACJ,GAzBD;AA2BA,SAAO;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AACH;AAED;;;;;AAIA,eAAepB,YAAf","sourcesContent":["\nimport React from \"react\";\nimport firebase from \"firebase\";\nimport axios from \"axios\";\n\n\n/**\n * Define \n */\n\nfunction AuthCallBack(props) {\n    firebase.auth().onAuthStateChanged(async user => {\n        console.log(\"Authcallbackl\")\n        // User is signed in.\n        if (user) {\n            let token = await user.getIdToken();\n            localStorage.setItem(\"token\", token);\n\n            axios\n                .post(`${process.env.REACT_APP_API_URL}/users/auth`, {\n                    user: user,\n                    token: token\n                })\n                .then(res => {\n                    console.log(res.data,  \"data\")\n                    localStorage.setItem(\"id\", res.data.id);\n                    window.location = \"/home\";\n                })\n                .catch(err => {\n                    console.error(err);\n                    window.location = \"/login\";\n                });\n        } else {\n            // User is signed out.\n            window.location = \"/login\";\n        }\n    });\n\n    return <div className=\"login\" />;\n}\n\n/**\n * Export view\n */\n\nexport default AuthCallBack;\n"]},"metadata":{},"sourceType":"module"}